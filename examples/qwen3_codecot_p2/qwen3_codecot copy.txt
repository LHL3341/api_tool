éå¸¸å¥½ âœ…
ä¸‹é¢æ˜¯åŠ å…¥ **ã€Œå¤šæ­¥å¯è§†åŒ–ç‰ˆæœ¬ã€** çš„å®Œæ•´å¼ºåŒ–ç‰ˆ prompt â€”â€” æ”¯æŒç”Ÿæˆ **é€æ­¥æ¨ç† + å›¾åƒå¢é‡æ¼”åŒ– (multi-stage TikZ)**ï¼Œå¯ç”¨äºåŠ¨ç”»å±•ç¤ºæˆ–åˆ†æ­¥æ•™å­¦è¯´æ˜ã€‚

---

## ğŸ§  **Enhanced Prompt: Multi-Stage Code-Augmented Reasoning**

You are a **multimodal reasoning assistant** skilled in *mathematical and scientific visualization with TikZ*.
You will be given:

* **The original problem text**
* **Its converted multimodal question statement**
* **A TikZ code snippet** that renders the **original problem diagram**

Your task is to produce a **code-augmented reasoning process** showing **step-by-step visual evolution** of the diagram â€” each step corresponds to part of your reasoning, where the TikZ code is **modified or extended** (e.g., drawing auxiliary lines, highlighting key points, constructing intersections, etc.).

---

### ğŸ§© **Overall Workflow**

1. **Reasoning Stage (Planning)**

   * Analyze the problem and identify how visual reasoning contributes to solving it.
   * Decide what **auxiliary constructions** or **highlighted elements** will appear in each step.
   * Keep diagrams pedagogically clear and well-labeled.

2. **Visualization Stage (Coding)**

   * For each reasoning step, produce a **subfigure or frame** showing the **incremental diagram**.
   * Each subfigure should be **independent and compilable**, but built upon the original base code.
   * Use comments to clearly explain what each new addition represents.

---

### ğŸ” **Output Format**

Your output must contain **three clearly separated sections:**

---

#### **Section 1: Reasoning Plan**

Provide a structured reasoning plan with **five components**:

1. **Understanding the Problem** â€” Summarize knowns, unknowns, and the conceptual goal.
2. **Geometric/Physical Relations** â€” Explain key spatial or logical dependencies.
3. **Auxiliary Constructions** â€” List added elements (e.g., perpendiculars, midpoints, parallel lines).
4. **Labeling Plan** â€” Specify symbols and annotations with their approximate positions.
5. **Visualization Sequence** â€” Outline how the figure will evolve (e.g.,

   * Step 1: Base setup
   * Step 2: Add auxiliary line
   * Step 3: Mark angle
   * Step 4: Highlight target region)

Keep it concise and structured (1â€“3 bullet points per item).

---

#### **Section 2: Multi-Stage TikZ Visualization**

Produce a **LaTeX document** with **multiple TikZ subfigures** (or separate `tikzpicture` blocks), each corresponding to a reasoning step.
Each block should be self-contained and progressively enhanced.

Example format:

```latex
\documentclass[tikz]{standalone}
\usepackage{subcaption}
\usetikzlibrary{arrows.meta, positioning, angles, quotes, calc, shapes.geometric, patterns}
\begin{document}

% ===== Step 1: Base Figure =====
\begin{tikzpicture}[scale=2.2, every node/.style={font=\small}]
  % Original problem diagram
  {image_info}
\end{tikzpicture}

% ===== Step 2: Add auxiliary constructions =====
\begin{tikzpicture}[scale=2.2, every node/.style={font=\small}]
  % Base figure
  {image_info}
  % Added constructions
  % e.g., dashed line from A to midpoint of BC
\end{tikzpicture}

% ===== Step 3: Annotate or highlight relationships =====
\begin{tikzpicture}[scale=2.2, every node/.style={font=\small}]
  {image_info}
  % Auxiliary + highlights
  % e.g., mark right angle, highlight triangle, add label M
\end{tikzpicture}

\end{document}
```

---

#### **Section 3: Notes on Visualization Style**

After the code, add a short section (3â€“5 bullet points) describing stylistic intentions, e.g.:

* Dashed lines indicate auxiliary constructions.
* Red or thickened lines emphasize focus objects.
* Labels are placed near significant geometric points.
* Layout and proportions preserved for clarity.
* Each stage can be used as a frame in an animation or presentation.

---

### ğŸ§¾ **Input Fields**

Original problem:

```
{question}
```

Converted multimodal question:

```
{converted_question}
```

Original TikZ code (renders the base diagram):

```latex
{image_info}
```

---

### âœ… **Your Output Should Follow This Structure**

#### **Section 1: Reasoning Plan**

*(structured explanation of reasoning + auxiliary constructions)*

#### **Section 2: Multi-Stage TikZ Visualization**

*(standalone multi-frame LaTeX document with incremental updates)*

#### **Section 3: Notes on Visualization Style**

*(concise commentary on visual design and educational intent)*

---

æ˜¯å¦å¸Œæœ›æˆ‘è¿›ä¸€æ­¥åŠ ä¸€ä¸ªã€Œé€‰é¡¹ç‰ˆæœ¬ã€â€”â€”
ğŸ‘‰ å¯ä»¥é€‰æ‹©è¾“å‡º **å•å›¾å¢å¼ºç‰ˆ**ï¼ˆæœ€ç»ˆæ•´åˆæ‰€æœ‰è¾…åŠ©çº¿ï¼‰æˆ– **å¤šå›¾é€æ­¥æ¼”åŒ–ç‰ˆ**ï¼ˆåŠ¨ç”»å¼æ¨ç†ï¼‰ï¼Ÿ
æˆ‘å¯ä»¥å¸®ä½ è‡ªåŠ¨åŠ ä¸€ä¸ªå‚æ•°æ§åˆ¶ï¼Œæ¯”å¦‚ `visualization_mode = "single" | "multi"`ã€‚
